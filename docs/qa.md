/**
 * @file: qa.md
 * @description: Вопросы и ответы по проекту обработки текста с ИИ.
 * @dependencies: None
 * @created: 2024-07-29
 */

# Вопросы и Ответы

## Общие вопросы

- *(Пока нет вопросов для этого раздела)*

## Вопросы по интеграции ИИ для исправления ошибок

1.  **API Ключ и Конфигурация**: Где будет храниться API ключ для OpenRouter? Предполагается ли использование переменных окружения или конфигурационного файла? Как будут задаваться обязательные заголовки `HTTP-Referer` и `X-Title`?
    *   *Ответ*: API-ключ предоставлен и используется как значение по умолчанию в коде (`tools/check_text_languagetool.py`), если не установлена переменная окружения `OPENROUTER_API_KEY`. **Настоятельно рекомендуется установить ключ через переменную окружения для безопасности.** 
        Заголовки `HTTP-Referer` и `X-Title` также используют значения по умолчанию из кода или переменных окружения:
        *   `OPENROUTER_SITE_URL` (по умолчанию `http://localhost` для локальной разработки).
        *   `OPENROUTER_APP_NAME` (по умолчанию `PiskulinTextProcessing`, можно изменить на другое описательное имя, например, `CursorTextToolLocal`).
2.  **Выбор модели ИИ**: Используется модель **qwen/qwen3-235b-a22b:free** через OpenRouter. Необходимо убедиться, что этот идентификатор модели корректен для API OpenRouter и модель действительно доступна бесплатно с учетом возможных ограничений.
    *   *Ответ*: Идентификатор модели обновлен на `qwen/qwen3-235b-a22b:free` на основе предоставленной информации. (Ожидается подтверждение доступности/ограничений на OpenRouter).
3.  **Объем контекста для ИИ**: Есть ли предпочтения по объему контекста (например, количество символов/слов вокруг ошибки), который следует передавать ИИ для анализа? Текущее значение `MAX_CONTEXT_LENGTH` равно 250 символам.
    *   *Ответ*: (Ожидается ответ)
4.  **Обработка HTML-тегов**: Если в будущем потребуется автоматическое применение исправлений ИИ непосредственно в HTML, какие стратегии предпочтительны для сохранения целостности HTML-структуры (например, парсинг HTML и работа с текстовыми узлами, или передача "очищенного" текста ИИ и последующее "встраивание" исправлений)?
    *   *Ответ*: (Ожидается ответ)

# QA: Обработка текста с ИИ

Этот документ предназначен для сбора вопросов, возникающих в ходе проектирования и разработки, и ответов на них.

## Общие вопросы по проекту

1.  **Вопрос:** Какие типы текстов предполагается обрабатывать в первую очередь (например, научные статьи, художественная литература, техническая документация, новостные заметки)? От этого может зависеть специфика некоторых ИИ-функций.
    **Ответ:** художественная литература

2.  **Вопрос:** Есть ли предпочтения по конкретным библиотекам или фреймворкам для бэкенда (Flask, Django, FastAPI) и фронтенда (чистый JS, React, Vue, Angular)?
    **Ответ:** нет 

3.  **Вопрос:** Каковы ожидания по производительности системы? (например, время обработки среднего документа)
    **Ответ:** качество важнее скорости

4.  **Вопрос:** Предполагается ли хранение пользовательских данных, истории обработок, шаблонов? Если да, то какие требования к базе данных?
    **Ответ:** пока нет

5.  **Вопрос:** Будет ли система использоваться одним пользователем или предполагается многопользовательский режим с разграничением прав доступа?
    **Ответ:** только я

## Вопросы по ИИ-обработке

1.  **Вопрос:** Кроме выбранной модели Qwen: Qwen3 235B A22B, есть ли какие-то специфические требования к возможностям ИИ? Например, нужно ли распознавание именованных сущностей (NER) определенного типа, или анализ тональности с определенной гранулярностью?
    **Ответ:** не знаю

2.  **Вопрос:** Планируется ли использование локальных инструментов типа LanguageTool и Typograf параллельно с основной ИИ-моделью, или ИИ-модель должна покрывать все их функции?
    **Ответ:** параллельно. ИИ должна дополнять их функции для ускорения процесса 

## Вопросы по макетированию и выводу

1.  **Вопрос:** Есть ли существующие шаблоны или строгие требования к оформлению для PDF, Epub, HTML выводов? Касательно PrinceXML, будут ли использоваться специфические CSS для PrinceXML или стандартные CSS?
    **Ответ:** специфические CSS для PrinceXML, частично покрывается `prince-rules` добавим ещё правила

2.  **Вопрос:** Какова приоритетность форматов вывода? С какого формата лучше начать реализацию?
    **Ответ:** Первым делом обработка текста, потом займемся остальным

## Вопросы по интерфейсам pipeline
- Нужно ли предусмотреть версионирование промежуточных файлов для отслеживания изменений?
- Требуется ли хранить логи каждого этапа в отдельном файле?
- Достаточно ли текущей структуры для интеграции новых этапов в будущем, если появится такая необходимость?

## Вопросы по сохранению промежуточных и итоговых файлов

1.  **Вопрос:** Нужно ли сохранять итоговый HTML-файл перед конвертацией в docx/pdf/epub?
    **Ответ:** Да, итоговый HTML-файл (final.html) должен сохраняться в директории output перед экспортом в любой из поддерживаемых форматов. Это обеспечивает прозрачность и возможность аудита финального состояния текста.

*(Этот документ будет пополняться по мере возникновения новых вопросов)*

